# ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต: ะะธัะฝัะน ะบะฐะฑะธะฝะตั ะธัะฟะพะปะฝะธัะตะปั - ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐัะฒะบะฐะผะธ

## ๐ ะะฑัะฐั ะธะฝัะพัะผะฐัะธั

**ะะพะดัะปั:** ะะธัะฝัะน ะบะฐะฑะธะฝะตั ะธัะฟะพะปะฝะธัะตะปั  
**ะกััะฐะฝะธัะฐ:** `/executor/dashboard`  
**ะะฐัะฐ:** 2025-01-XX  
**ะัะธะพัะธัะตั:** ะััะพะบะธะน

---

## ๐ฏ ะฆะตะปั

ะะตะฐะปะธะทะพะฒะฐัั ัะธััะตะผั ัะฟัะฐะฒะปะตะฝะธั ะทะฐัะฒะบะฐะผะธ (ะฟัะธะปะพะถะตะฝะธัะผะธ) ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต ะธัะฟะพะปะฝะธัะตะปั ั ะฒะพะทะผะพะถะฝะพัััั:
- ะััะปะตะถะธะฒะฐะฝะธั ะทะฐัะฒะพะบ ะฟะพ ััะฐัััะฐะผ ั ะปะพะณะธัะตัะบะพะน ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพัััั
- ะะฑัะทะฐัะตะปัะฝะพะน ะทะฐะณััะทะบะธ ะฟัะพะตะบัะพะฒ/ะฟะปะฐะฝะธัะพะฒะพะบ ั ัะฐะทะผะตัะฐะผะธ ะดะฒะตัะตะน
- ะัะพะฒะตัะบะธ ะธ ะฒะตัะธัะธะบะฐัะธะธ ะดะฐะฝะฝัั ะดะฒะตัะตะน ะฟะตัะตะด ะทะฐะฟัะพัะพะผ ััะตัะฐ ั ะฟะพััะฐะฒัะธะบะฐ
- ะฃะฟัะฐะฒะปะตะฝะธั ัะฐะนะปะฐะผะธ (ะพะฟัะพะฒัะต ััะตัะฐ, ัะตัะทะฐะดะฐะฝะธั ะดะปั ะฟัะพัะฐะฑะพะฒ)

---

## ๐ ะขะตะบััะฐั ััััะบัััะฐ ะธะฝัะตััะตะนัะฐ

### ะะตะฒะฐั ะฟะฐะฝะตะปั - ะะปะธะตะฝัั (ัััะตััะฒัััะฐั)
- ะกะฟะธัะพะบ ะบะปะธะตะฝัะพะฒ
- ะะพะธัะบ ะฟะพ ะคะะ, ัะตะปะตัะพะฝั, ะฐะดัะตัั
- ะะฝะพะฟะบะธ "ะกะพะทะดะฐัั" ะธ "ะ ัะฐะฑะพัะต"
- ะัะฑะพั ะบะปะธะตะฝัะฐ

### ะัะฐะฒะฐั ะฟะฐะฝะตะปั - ะะะะะฏ ััะฝะบัะธะพะฝะฐะปัะฝะพััั

**ะขะตะบััะตะต ัะพััะพัะฝะธะต:**
- ะะบะปะฐะดะบะธ: "ะกัะตัะฐ" ะธ "ะะฐะบะฐะท ั ะฟะพััะฐะฒัะธะบะฐ"
- ะัะพะฑัะฐะถะตะฝะธะต ะดะพะบัะผะตะฝัะพะฒ ะฒัะฑัะฐะฝะฝะพะณะพ ะบะปะธะตะฝัะฐ

**ะขัะตะฑัะตะผะพะต ัะพััะพัะฝะธะต:**
- ะขะฐะฑะปะพ ะทะฐัะฒะพะบ ะฟะพ ััะฐัััะฐะผ ั ะปะพะณะธัะตัะบะพะน ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพัััั
- ะะบะปะฐะดะบะธ ัะพ ััะฐัััะฐะผะธ ะทะฐัะฒะพะบ (ะฝะต ะดะพะบัะผะตะฝัะพะฒ ะบะปะธะตะฝัะฐ)
- ะขะฐะฑะปะธัะฐ ะทะฐัะฒะพะบ ั ะบะพะปะพะฝะบะฐะผะธ: ะะะขะ, ะะะ, ะะะะะะะะขะะขะะ, ะคะะ ะะะะะะขะ, ะะดัะตั

---

## ๐ ะกัะฐัััั ะทะฐัะฒะพะบ (Application/Request)

### ะะฟัะตะดะตะปะตะฝะธะต ััะฐัััะพะฒ

1. **ะะพะฒะฐั ะทะฐัะฒะบะฐ (ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝะฝะฐั)** 
   - ะะฐะทะฒะฐะฝะธะต: `NEW_PLANNED` / "ะะพะฒะฐั ะทะฐัะฒะบะฐ (ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝะฝะฐั)"
   - ะะฟะธัะฐะฝะธะต: ะะฐัะฒะบะฐ ัะพะทะดะฐะฝะฐ ะธ ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝะฐ ะบ ะพะฑัะฐะฑะพัะบะต

2. **ะะฐ ะฟัะพะฒะตัะบะต**
   - ะะฐะทะฒะฐะฝะธะต: `UNDER_REVIEW` / "ะะฐ ะฟัะพะฒะตัะบะต"
   - ะะฟะธัะฐะฝะธะต: ะัะฟะพะปะฝะธัะตะปั ะฟัะพะฒะตััะตั ะดะฐะฝะฝัะต ะทะฐัะฒะบะธ

3. **ะะดัั ะทะฐะผะตั**
   - ะะฐะทะฒะฐะฝะธะต: `AWAITING_MEASUREMENT` / "ะะดัั ะทะฐะผะตั"
   - ะะฟะธัะฐะฝะธะต: ะขัะตะฑัะตััั ะฟัะพะฒะตะดะตะฝะธะต ะทะฐะผะตัะฐ

4. **ะะถะธะดะฐัั ััะตั (ะะพะดะณััะทะธัั ะพะฟัะพะฒัะต ััะตัะฐ)**
   - ะะฐะทะฒะฐะฝะธะต: `AWAITING_INVOICE` / "ะะถะธะดะฐัั ััะตั"
   - ะะฟะธัะฐะฝะธะต: ะะพัะพะฒั ะบ ะทะฐะฟัะพัั ััะตัะฐ ั ะฟะพััะฐะฒัะธะบะฐ, ะฝะพ ััะตะฑัะตััั ะทะฐะณััะทะบะฐ ะพะฟัะพะฒัั ััะตัะพะฒ
   - ะัะพะฑะตะฝะฝะพััั: ะญัะพั ััะฐััั ัะฐะบะถะต ัะฒะปัะตััั ะดะตะนััะฒะธะตะผ - ะบะฝะพะฟะบะพะน ะดะปั ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ

5. **ะะฐัะฒะบะฐ ะฒัะฟะพะปะฝะตะฝะฐ (ััะตัะฐ ะฟะพะดะณััะถะตะฝั)**
   - ะะฐะทะฒะฐะฝะธะต: `COMPLETED` / "ะะฐัะฒะบะฐ ะฒัะฟะพะปะฝะตะฝะฐ"
   - ะะฟะธัะฐะฝะธะต: ะัะต ััะตัะฐ ะทะฐะณััะถะตะฝั, ะทะฐัะฒะบะฐ ะฒัะฟะพะปะฝะตะฝะฐ

### ะะพะณะธัะตัะบะฐั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ััะฐัััะพะฒ

```
NEW_PLANNED โ UNDER_REVIEW โ [AWAITING_MEASUREMENT | AWAITING_INVOICE] โ COMPLETED
```

**ะฃัะปะพะฒะธั ะฟะตัะตัะพะดะพะฒ:**
- `NEW_PLANNED` โ `UNDER_REVIEW`: ะะฒัะพะผะฐัะธัะตัะบะธ ะธะปะธ ะฒัััะฝัั ะฟัะธ ะฝะฐัะฐะปะต ะพะฑัะฐะฑะพัะบะธ
- `UNDER_REVIEW` โ `AWAITING_MEASUREMENT`: ะัะปะธ ััะตะฑัะตััั ะทะฐะผะตั (ัะปะพะถะฝัะน ะฟัะพะตะบั ะธะปะธ ะฝะตั ะทะฐะผะตัะฐ)
- `UNDER_REVIEW` โ `AWAITING_INVOICE`: ะัะปะธ ะทะฐะผะตั ะฑัะป ะธะปะธ ะฟัะพะตะบั ะฟัะพััะพะน
- `AWAITING_MEASUREMENT` โ `AWAITING_INVOICE`: ะะพัะปะต ะฟัะพะฒะตะดะตะฝะธั ะทะฐะผะตัะฐ
- `AWAITING_INVOICE` โ `COMPLETED`: ะะพัะปะต ะทะฐะณััะทะบะธ ะฒัะตั ะฝะตะพะฑัะพะดะธะผัั ััะตัะพะฒ ะธ ัะฐะนะปะพะฒ

---

## ๐ ะกัััะบัััะฐ ะดะฐะฝะฝัั ะทะฐัะฒะบะธ (Application)

### ะะฐะทะฐ ะดะฐะฝะฝัั - ะฝะพะฒะฐั ะผะพะดะตะปั `Application`

```prisma
model Application {
  id                  String    @id @default(cuid())
  number              String    @unique // ะะพะผะตั ะทะฐัะฒะบะธ (ะฝะฐะฟัะธะผะตั, APP-XXXXXX)
  client_id           String
  invoice_id          String?   // ะกะฒัะทะฐะฝะฝัะน ััะตั (ะพะฟะปะฐัะตะฝะฝะฐั ะทะฐัะฒะบะฐ)
  lead_number         String?   // ะะพะผะตั ะปะธะดะฐ
  complectator_id     String?   // ID ะบะพะผะฟะปะตะบัะฐัะพัะฐ
  executor_id         String?   // ID ะธัะฟะพะปะฝะธัะตะปั
  status              String    @default("NEW_PLANNED")
  
  // ะะฐะฝะฝัะต ะฟัะพะตะบัะฐ
  project_file_url    String?   // URL ัะฐะนะปะฐ ะฟัะพะตะบัะฐ/ะฟะปะฐะฝะธัะพะฒะบะธ (ะพะฑัะทะฐัะตะปัะฝะพะต ะดะปั ะฟัะพะฒะตัะบะธ)
  door_dimensions     String?   // JSON ั ัะฐะทะผะตัะฐะผะธ ะดะฒะตัะตะน: [{width, height, quantity, opening_side, latches_count, notes}]
  measurement_done    Boolean   @default(false) // ะัะป ะปะธ ะฟัะพะฒะตะดะตะฝ ะทะฐะผะตั
  project_complexity  String?   // "SIMPLE" | "COMPLEX" | null
  
  // ะคะฐะนะปั
  wholesale_invoices  String?   // JSON ะผะฐััะธะฒ URL ะพะฟัะพะฒัั ััะตัะพะฒ
  technical_specs     String?   // JSON ะผะฐััะธะฒ URL ัะตัะทะฐะดะฐะฝะธะน ะฝะฐ ะฟัะพะตะผั (PDF)
  
  // ะัะพะฒะตัะบะฐ
  verification_status String?   // "PENDING" | "VERIFIED" | "FAILED"
  verification_notes  String?   // ะัะธะผะตัะฐะฝะธั ะฟัะพะฒะตัะบะธ
  
  notes               String?
  created_at          DateTime  @default(now())
  updated_at          DateTime  @updatedAt
  
  // ะกะฒัะทะธ
  client              Client    @relation(fields: [client_id], references: [id], onDelete: Cascade)
  invoice             Invoice?  @relation(fields: [invoice_id], references: [id])
  
  @@index([client_id])
  @@index([status])
  @@index([invoice_id])
  @@index([executor_id])
  @@index([created_at])
  @@map("applications")
}
```

### ะคะพัะผะฐั ะดะฐะฝะฝัั ะดะฒะตัะตะน (door_dimensions)

```typescript
interface DoorDimension {
  width: number;           // ะจะธัะธะฝะฐ (ะผะผ)
  height: number;          // ะััะพัะฐ (ะผะผ)
  quantity: number;        // ะะพะปะธัะตััะฒะพ
  opening_side: string;    // "LEFT" | "RIGHT" | "BOTH" - ััะพัะพะฝะฐ ะพัะบััะฒะฐะฝะธั
  latches_count: number;   // ะะพะปะธัะตััะฒะพ ะทะฐะฒะตััะพะบ
  notes?: string;          // ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะฟัะธะผะตัะฐะฝะธั
}
```

---

## ๐จ UI/UX ะขัะตะฑะพะฒะฐะฝะธั

### ะัะฐะฒะฐั ะฟะฐะฝะตะปั - ะขะฐะฑะปะพ ะทะฐัะฒะพะบ

#### ะะฐะบะตั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะขะะะะ ะะะฏะะะ                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  [ะะพะฒะฐั] [ะัะพะฒะตัะบะฐ] [ะะดัั ะทะฐะผะตั] [ะะถะธะดะฐัั ััะตั] [ะัะฟะพะปะฝะตะฝะฐ]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะะะขะ โ ะะะ โ ะะะะะะะะขะะขะะ โ ะคะะ ะะะะะะขะ โ ะะดัะตั โ [ะะตะนััะฒะธั]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  01.01โ ะ-01 โ ะะฒะฐะฝะพะฒ ะ.ะ. โ ะะตััะพะฒ ะ.ะ. โ ...   โ [โขโขโข]   โ
โ  02.01โ ะ-02 โ ะกะธะดะพัะพะฒ ะก.ะกโ ะะฒะฐะฝะพะฒ ะ.ะ. โ ...   โ [โขโขโข]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ะะบะปะฐะดะบะธ ััะฐัััะพะฒ

- **ะะฐัะฟะพะปะพะถะตะฝะธะต:** ะะพัะธะทะพะฝัะฐะปัะฝะพ ะฟะพะด ะทะฐะณะพะปะพะฒะบะพะผ
- **ะะธะทัะฐะปะธะทะฐัะธั:** ะขะฐะฑั ั ะฒะพะทะผะพะถะฝะพัััั ะฟะตัะตะบะปััะตะฝะธั
- **ะะบัะธะฒะฝัะน ัะฐะฑ:** ะะพะดัะตัะบะฝัั, ะฒัะดะตะปะตะฝ ัะฒะตัะพะผ
- **ะกัะตััะธะบ:** ะะพะบะฐะทัะฒะฐัั ะบะพะปะธัะตััะฒะพ ะทะฐัะฒะพะบ ะฒ ะบะฐะถะดะพะผ ััะฐัััะต (ะตัะปะธ > 0)

#### ะขะฐะฑะปะธัะฐ ะทะฐัะฒะพะบ

**ะะพะปะพะฝะบะธ:**
1. **ะะะขะ** - ะะฐัะฐ ัะพะทะดะฐะฝะธั ะทะฐัะฒะบะธ (ัะพัะผะฐั: DD.MM.YYYY)
2. **ะะะ** - ะะพะผะตั ะปะธะดะฐ (ะตัะปะธ ะตััั)
3. **ะะะะะะะะขะะขะะ** - ะคะะ ะบะพะผะฟะปะตะบัะฐัะพัะฐ (ะตัะปะธ ะฝะฐะทะฝะฐัะตะฝ)
4. **ะคะะ ะะะะะะขะ** - ะคะะ ะบะปะธะตะฝัะฐ (ะธะท ัะฒัะทะฐะฝะฝะพะณะพ ะบะปะธะตะฝัะฐ)
5. **ะะดัะตั** - ะะดัะตั ะพะฑัะตะบัะฐ (ะธะท ัะฒัะทะฐะฝะฝะพะณะพ ะบะปะธะตะฝัะฐ)
6. **ะะตะนััะฒะธั** - ะะฝะพะฟะบะฐ ะผะตะฝั (ััะธ ัะพัะบะธ)

**ะะพะฒะตะดะตะฝะธะต:**
- ะกะพััะธัะพะฒะบะฐ ะฟะพ ะดะฐัะต (ะฝะพะฒัะต ัะฒะตััั)
- ะะปะธะบ ะฟะพ ัััะพะบะต: ะพัะบััะฒะฐะตั ะดะตัะฐะปัะฝัะน ะฒะธะด ะทะฐัะฒะบะธ
- ะคะธะปัััะฐัะธั: ัะพะปัะบะพ ะทะฐัะฒะบะธ ะฒัะฑัะฐะฝะฝะพะณะพ ััะฐัััะฐ ะฒ ะฐะบัะธะฒะฝะพะน ะฒะบะปะฐะดะบะต

---

## ๐ง ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

### 1. ะกะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ ะธะท ะพะฟะปะฐัะตะฝะฝะพะณะพ ััะตัะฐ

**ะขัะธะณะณะตั:**
- ะะพะณะดะฐ ััะตั (`Invoice`) ะผะตะฝัะตั ััะฐััั ะฝะฐ `PAID` (ะะฟะปะฐัะตะฝ/ะะฐะบะฐะท)
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ ัะพ ััะฐัััะพะผ `NEW_PLANNED`

**API Endpoint:**
```
POST /api/applications
Body: {
  invoice_id: string,
  client_id: string,
  lead_number?: string,
  complectator_id?: string
}
```

### 2. ะะฑัะทะฐัะตะปัะฝะฐั ะทะฐะณััะทะบะฐ ะฟัะพะตะบัะฐ/ะฟะปะฐะฝะธัะพะฒะบะธ

**ะขัะตะฑะพะฒะฐะฝะธะต:**
- ะัะธ ะฟะตัะตัะพะดะต ะธะท ััะฐัััะฐ `NEW_PLANNED` ะฒ `UNDER_REVIEW` ะฟัะพะฒะตัััั ะฝะฐะปะธัะธะต `project_file_url`
- ะัะปะธ ัะฐะนะป ะพััััััะฒัะตั - ะฑะปะพะบะธัะพะฒะฐัั ะฟะตัะตัะพะด ะธ ะฟะพะบะฐะทัะฒะฐัั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต
- ะคะพัะผะฐัั ัะฐะนะปะพะฒ: PDF, JPG, PNG, DWG, DXF

**UI:**
- ะะฝะพะฟะบะฐ "ะะฐะณััะทะธัั ะฟัะพะตะบั/ะฟะปะฐะฝะธัะพะฒะบั" ะฒ ะดะตัะฐะปัะฝะพะผ ะฒะธะดะต ะทะฐัะฒะบะธ
- ะะฝะดะธะบะฐัะพั ะพะฑัะทะฐัะตะปัะฝะพััะธ (ะบัะฐัะฝะฐั ะทะฒะตะทะดะพัะบะฐ *)
- ะะฐะปะธะดะฐัะธั ะฟัะธ ะฟะพะฟััะบะต ะฟะตัะตัะพะดะฐ ััะฐัััะฐ

### 3. ะัะพะฒะตัะบะฐ ะดะฐะฝะฝัั ะดะฒะตัะตะน

**ะะพะณะดะฐ ะฒัะฟะพะปะฝัะตััั:**
- ะัะธ ะฟะตัะตัะพะดะต ะธะท `UNDER_REVIEW` ะฒ `AWAITING_INVOICE`
- ะะตัะตะด ะทะฐะฟัะพัะพะผ ััะตัะฐ ั ะฟะพััะฐะฒัะธะบะฐ

**ะงัะพ ะฟัะพะฒะตััะตััั:**
1. **ะะฐะทะผะตัั ะดะฒะตัะตะน:**
   - ะกัะฐะฒะฝะตะฝะธะต ัะฐะทะผะตัะพะฒ ะธะท `cart_data` ััะตัะฐ ั ัะฐะทะผะตัะฐะผะธ ะธะท ะฟัะพะตะบัะฐ
   - ะะพะปะธัะตััะฒะพ ะดะฒะตัะตะน ะดะพะปะถะฝะพ ัะพะฒะฟะฐะดะฐัั
   - ะะฐะทะผะตัั ะดะพะปะถะฝั ะฑััั ัะบะฐะทะฐะฝั ะดะปั ะฒัะตั ะฟะพะทะธัะธะน

2. **ะัะบััะฒะฐะฝะธะต:**
   - ะะฟัะตะดะตะปะตะฝะธะต ััะพัะพะฝั ะพัะบััะฒะฐะฝะธั (ะปะตะฒะฐั/ะฟัะฐะฒะฐั/ะพะฑะต)
   - ะกะพััะฐะฝะตะฝะธะต ะฒ `door_dimensions`

3. **ะะฐะฒะตััะบะธ:**
   - ะะพะปะธัะตััะฒะพ ะทะฐะฒะตััะพะบ ะดะปั ะบะฐะถะดะพะน ะดะฒะตัะธ
   - ะกะพััะฐะฝะตะฝะธะต ะฒ `door_dimensions`

**UI - ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะฟัะพะฒะตัะบะธ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะัะพะฒะตัะบะฐ ะดะฐะฝะฝัั ะทะฐัะฒะบะธ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะัะพะตะบั: [ะทะฐะณััะถะตะฝ โ]                    โ
โ                                          โ
โ  ะะฐะฝะฝัะต ะดะฒะตัะตะน ะธะท ััะตัะฐ:                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ 800x2000 ะผะผ, 2 ัั.                โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                          โ
โ  ะะฐะฝะฝัะต ะดะฒะตัะตะน ะธะท ะฟัะพะตะบัะฐ:              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ 800x2000 ะผะผ, 2 ัั.                  โ โ
โ  โ ะัะบััะฒะฐะฝะธะต: [ ] ะะตะฒะพะต [โ] ะัะฐะฒะพะต   โ โ
โ  โ ะะฐะฒะตััะบะธ: [2] ัั.                   โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                          โ
โ  [ ] ะะฐะฝะฝัะต ะฟัะพะฒะตัะตะฝั ะธ ัะพะฒะฟะฐะดะฐัั      โ
โ                                          โ
โ  [ะัะผะตะฝะฐ] [ะะพะดัะฒะตัะดะธัั ะธ ะฟัะพะดะพะปะถะธัั]    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 4. ะะพะณะธะบะฐ ะพะฟัะตะดะตะปะตะฝะธั ะฝะตะพะฑัะพะดะธะผะพััะธ ะทะฐะผะตัะฐ

**ะฃัะปะพะฒะธั:**

**ะกัะตะฝะฐัะธะน A: ะะฐะผะตั ะฑัะป ะธะปะธ ะฟัะพะตะบั ะฟัะพััะพะน**
- ะัะปะธ `measurement_done === true` ะะะ `project_complexity === "SIMPLE"`
- ะะตัะตัะพะด ะฝะฐะฟััะผัั: `UNDER_REVIEW` โ `AWAITING_INVOICE`
- ะะพะถะฝะพ ััะฐะทั ะทะฐะฟัะพัะธัั ััะตั ั ะฟะพััะฐะฒัะธะบะฐ

**ะกัะตะฝะฐัะธะน B: ะะฐะผะตัะฐ ะฝะต ะฑัะปะพ ะธะปะธ ะฟัะพะตะบั ัะปะพะถะฝัะน**
- ะัะปะธ `measurement_done === false` ะ (`project_complexity === "COMPLEX"` ะะะ ะฟัะพะตะบั ัะปะพะถะฝัะน ะฝะฐ ััะผะพััะตะฝะธะต ะธัะฟะพะปะฝะธัะตะปั)
- ะะตัะตัะพะด: `UNDER_REVIEW` โ `AWAITING_MEASUREMENT`
- ะะพัะปะต ะทะฐะผะตัะฐ: `AWAITING_MEASUREMENT` โ `AWAITING_INVOICE`

**UI - ะะธะฐะปะพะณ ะฟัะธะฝััะธั ัะตัะตะฝะธั:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะฟัะตะดะตะปะตะฝะธะต ะดะฐะปัะฝะตะนัะธั ะดะตะนััะฒะธะน         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะะฐะผะตั: [โ] ะัะป [ ] ะะต ะฑัะป              โ
โ  ะกะปะพะถะฝะพััั ะฟัะพะตะบัะฐ:                      โ
โ  [ ] ะัะพััะพะน                             โ
โ  [โ] ะกะปะพะถะฝัะน (ััะตะฑัะตััั ะทะฐะผะตั)          โ
โ                                          โ
โ  [ะะฐะฟัะฐะฒะธัั ะฝะฐ ะทะฐะผะตั] [ะะฐะฟัะพัะธัั ััะตั]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 5. ะะฐะณััะทะบะฐ ะพะฟัะพะฒัั ััะตัะพะฒ ะธ ัะตัะทะฐะดะฐะฝะธะน

**ะขัะตะฑะพะฒะฐะฝะธะต:**
- ะ ััะฐัััะต `AWAITING_INVOICE` ะพะฑัะทะฐัะตะปัะฝะฐ ะพะฟัะธั ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ
- ะขะธะฟั ัะฐะนะปะพะฒ:
  1. **ะะฟัะพะฒัะต ััะตัะฐ** - ัะฐะนะปั ััะตัะพะฒ ะพั ะฟะพััะฐะฒัะธะบะพะฒ (PDF, Excel)
  2. **ะขะตัะทะฐะดะฐะฝะธั ะฝะฐ ะฟัะพะตะผั** - PDF ัะฐะนะปั ั ัะตัะทะฐะดะฐะฝะธัะผะธ ะดะปั ะฟัะพัะฐะฑะพะฒ

**UI - ะะฝะพะฟะบะฐ/ะฒะบะปะฐะดะบะฐ "ะะพะดะณััะทะธัั ะพะฟัะพะฒัะต ััะตัะฐ":**
- ะะพะถะตั ะฑััั ะบะฐะบ ะพัะดะตะปัะฝะฐั ะฒะบะปะฐะดะบะฐ ััะฐัััะฐ, ัะฐะบ ะธ ะดะตะนััะฒะธะต ะฒ ะผะตะฝั ะทะฐัะฒะบะธ
- ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะทะฐะณััะทะบะธ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ะะฟัะพะฒัะต ััะตัะฐ:                          โ
โ  [ะัะฑัะฐัั ัะฐะนะปั...]                      โ
โ  โ invoice_supplier_1.pdf (1.2 MB)      โ
โ  โ invoice_supplier_2.xlsx (850 KB)      โ
โ                                          โ
โ  ะขะตัะทะฐะดะฐะฝะธั ะฝะฐ ะฟัะพะตะผั (PDF):             โ
โ  [ะัะฑัะฐัั ัะฐะนะปั...]                      โ
โ  โ tech_spec_door_1.pdf (2.1 MB)        โ
โ  โ tech_spec_door_2.pdf (1.8 MB)        โ
โ                                          โ
โ  [ะัะผะตะฝะฐ] [ะกะพััะฐะฝะธัั]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะณัะฐะฝะธัะตะฝะธั:**
- ะะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั ัะฐะนะปะฐ: 10 MB
- ะคะพัะผะฐัั: PDF, XLSX, XLS (ะดะปั ััะตัะพะฒ), PDF (ะดะปั ัะตัะทะฐะดะฐะฝะธะน)
- ะกะพััะฐะฝะตะฝะธะต ะฒ ััะฐะฝะธะปะธัะต (local filesystem ะธะปะธ S3)
- URL ัะพััะฐะฝััััั ะฒ JSON ะผะฐััะธะฒะฐั ะฒ ะะ

### 6. ะะตัะฐะปัะฝัะน ะฒะธะด ะทะฐัะฒะบะธ

**ะกะพะดะตัะถะฐะฝะธะต:**
- ะะฑัะฐั ะธะฝัะพัะผะฐัะธั (ะฝะพะผะตั, ััะฐััั, ะดะฐัั)
- ะกะฒัะทะฐะฝะฝัะน ะบะปะธะตะฝั
- ะกะฒัะทะฐะฝะฝัะน ััะตั
- ะะฐะณััะถะตะฝะฝัะน ะฟัะพะตะบั/ะฟะปะฐะฝะธัะพะฒะบะฐ (ะฟัะพัะผะพัั)
- ะะฐะฝะฝัะต ะดะฒะตัะตะน (ัะฐะฑะปะธัะฐ)
- ะะฐะณััะถะตะฝะฝัะต ัะฐะนะปั (ัะฟะธัะพะบ ั ะฒะพะทะผะพะถะฝะพัััั ัะบะฐัะธะฒะฐะฝะธั)
- ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน
- ะะพะผะผะตะฝัะฐัะธะธ
- ะะตะนััะฒะธั (ะธะทะผะตะฝะตะฝะธะต ััะฐัััะฐ, ะทะฐะณััะทะบะฐ ัะฐะนะปะพะฒ)

---

## ๐ API Endpoints

### ะกะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ
```
POST /api/applications
Body: {
  invoice_id: string,
  client_id: string,
  lead_number?: string,
  complectator_id?: string
}
Response: { application: Application }
```

### ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะทะฐัะฒะพะบ
```
GET /api/applications?status=AWAITING_INVOICE&executor_id=xxx
Response: { applications: Application[] }
```

### ะะพะปััะตะฝะธะต ะทะฐัะฒะบะธ
```
GET /api/applications/[id]
Response: { application: Application }
```

### ะะทะผะตะฝะตะฝะธะต ััะฐัััะฐ ะทะฐัะฒะบะธ
```
PUT /api/applications/[id]/status
Body: {
  status: string,
  notes?: string,
  require_measurement?: boolean
}
Response: { application: Application }
```

### ะะฐะณััะทะบะฐ ะฟัะพะตะบัะฐ/ะฟะปะฐะฝะธัะพะฒะบะธ
```
POST /api/applications/[id]/project
Body: FormData { file: File }
Response: { application: Application, file_url: string }
```

### ะะฐะณััะทะบะฐ ะพะฟัะพะฒัั ััะตัะพะฒ ะธ ัะตัะทะฐะดะฐะฝะธะน
```
POST /api/applications/[id]/files
Body: FormData { 
  wholesale_invoices: File[],
  technical_specs: File[]
}
Response: { application: Application }
```

### ะะฑะฝะพะฒะปะตะฝะธะต ะดะฐะฝะฝัั ะดะฒะตัะตะน
```
PUT /api/applications/[id]/door-dimensions
Body: {
  door_dimensions: DoorDimension[],
  measurement_done: boolean,
  project_complexity: "SIMPLE" | "COMPLEX"
}
Response: { application: Application }
```

### ะัะพะฒะตัะบะฐ ะดะฐะฝะฝัั ะทะฐัะฒะบะธ
```
POST /api/applications/[id]/verify
Body: {
  verification_status: "VERIFIED" | "FAILED",
  verification_notes?: string
}
Response: { application: Application, verification_result: object }
```

---

## ๐๏ธ ะะธะณัะฐัะธั ะฑะฐะทั ะดะฐะฝะฝัั

### SQL ะผะธะณัะฐัะธั ะดะปั Prisma

```prisma
// ะะพะฑะฐะฒะธัั ะฒ schema.prisma

model Application {
  id                  String    @id @default(cuid())
  number              String    @unique
  client_id           String
  invoice_id          String?
  lead_number         String?
  complectator_id     String?
  executor_id         String?
  status              String    @default("NEW_PLANNED")
  
  project_file_url    String?
  door_dimensions     String?
  measurement_done    Boolean   @default(false)
  project_complexity   String?
  
  wholesale_invoices  String?
  technical_specs     String?
  
  verification_status String?
  verification_notes  String?
  
  notes               String?
  created_at          DateTime  @default(now())
  updated_at          DateTime  @updatedAt
  
  client              Client    @relation(fields: [client_id], references: [id], onDelete: Cascade)
  invoice             Invoice?  @relation(fields: [invoice_id], references: [id])
  
  @@index([client_id])
  @@index([status])
  @@index([invoice_id])
  @@index([executor_id])
  @@index([created_at])
  @@map("applications")
}

// ะะพะฑะฐะฒะธัั ัะฒัะทั ะฒ ะผะพะดะตะปั Invoice
model Invoice {
  // ... existing fields
  applications        Application[]
}

// ะะพะฑะฐะฒะธัั ัะฒัะทั ะฒ ะผะพะดะตะปั Client
model Client {
  // ... existing fields
  applications        Application[]
}
```

---

## ๐ ะะฝัะตะณัะฐัะธั ั ัััะตััะฒัััะตะน ัะธััะตะผะพะน

### ะกะฒัะทั ัะพ ััะตัะฐะผะธ (Invoice)

- ะัะธ ะพะฟะปะฐัะต ััะตัะฐ (`status = 'PAID'`) ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตััั ะทะฐัะฒะบะฐ
- ะะฐัะฒะบะฐ ัะฒัะทะฐะฝะฐ ัะพ ััะตัะพะผ ัะตัะตะท `invoice_id`
- ะะฐะฝะฝัะต ะดะฒะตัะตะน ะฑะตััััั ะธะท `cart_data` ััะตัะฐ

### ะกะฒัะทั ั ะบะปะธะตะฝัะฐะผะธ (Client)

- ะะฐัะฒะบะฐ ะฒัะตะณะดะฐ ัะฒัะทะฐะฝะฐ ั ะบะปะธะตะฝัะพะผ
- ะะฐะฝะฝัะต ะบะปะธะตะฝัะฐ (ะคะะ, ะฐะดัะตั) ะพัะพะฑัะฐะถะฐัััั ะฒ ัะฐะฑะปะธัะต ะทะฐัะฒะพะบ

### ะกะฒัะทั ั ะบะพะผะฟะปะตะบัะฐัะพัะฐะผะธ

- ะัะปะธ ะทะฐัะฒะบะฐ ัะพะทะดะฐะฝะฐ ะธะท ััะตัะฐ, ะณะดะต ะฑัะป ะบะพะผะฟะปะตะบัะฐัะพั - ัะพััะฐะฝัะตััั `complectator_id`
- ะัะพะฑัะฐะถะฐะตััั ะคะะ ะบะพะผะฟะปะตะบัะฐัะพัะฐ ะฒ ัะฐะฑะปะธัะต ะทะฐัะฒะพะบ

---

## โ ะัะธัะตัะธะธ ะฟัะธะตะผะบะธ

### ะะฑัะทะฐัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

1. โ ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะผะพะดะตะปั `Application` ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั
2. โ ะกะพะทะดะฐะฝั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต API endpoints
3. โ ะะตะฐะปะธะทะพะฒะฐะฝ ะธะฝัะตััะตะนั ัะฐะฑะปะพ ะทะฐัะฒะพะบ ั ะฒะบะปะฐะดะบะฐะผะธ ััะฐัััะพะฒ
4. โ ะะตะฐะปะธะทะพะฒะฐะฝะฐ ัะฐะฑะปะธัะฐ ะทะฐัะฒะพะบ ั ััะตะฑัะตะผัะผะธ ะบะพะปะพะฝะบะฐะผะธ
5. โ ะะฑัะทะฐัะตะปัะฝะฐั ะทะฐะณััะทะบะฐ ะฟัะพะตะบัะฐ/ะฟะปะฐะฝะธัะพะฒะบะธ ะฟะตัะตะด ะฟัะพะฒะตัะบะพะน
6. โ ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะฟัะพะฒะตัะบะฐ ะดะฐะฝะฝัั ะดะฒะตัะตะน ั ััะฐะฒะฝะตะฝะธะตะผ ะฟัะพะตะบัะฐ ะธ ััะตัะฐ
7. โ ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะปะพะณะธะบะฐ ะพะฟัะตะดะตะปะตะฝะธั ะฝะตะพะฑัะพะดะธะผะพััะธ ะทะฐะผะตัะฐ
8. โ ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะทะฐะณััะทะบะฐ ะพะฟัะพะฒัั ััะตัะพะฒ ะธ ัะตัะทะฐะดะฐะฝะธะน (PDF)
9. โ ะะตะฐะปะธะทะพะฒะฐะฝั ะฒัะต ะฟะตัะตัะพะดั ััะฐัััะพะฒ ั ะฒะฐะปะธะดะฐัะธะตะน
10. โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ ะฟัะธ ะพะฟะปะฐัะต ััะตัะฐ

### ะะพะฟะพะปะฝะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- โ ะะตัะฐะปัะฝัะน ะฒะธะด ะทะฐัะฒะบะธ ั ะฟะพะปะฝะพะน ะธะฝัะพัะผะฐัะธะตะน
- โ ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน ััะฐัััะพะฒ
- โ ะะพะผะผะตะฝัะฐัะธะธ ะบ ะทะฐัะฒะบะฐะผ
- โ ะฃะฒะตะดะพะผะปะตะฝะธั ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ััะฐัััะพะฒ
- โ ะะพะธัะบ ะธ ัะธะปัััะฐัะธั ะทะฐัะฒะพะบ

---

## ๐ ะัะธะผะตัะฐะฝะธั

1. **ะัะธะพัะธัะตั ััะฐัััะพะฒ:** ะัะธ ะพะดะฝะพะฒัะตะผะตะฝะฝะพะผ ะพัะพะฑัะฐะถะตะฝะธะธ ะฝะตัะบะพะปัะบะธั ััะฐัััะพะฒ, ะฟะพััะดะพะบ ะดะพะปะถะตะฝ ัะพะพัะฒะตัััะฒะพะฒะฐัั ะปะพะณะธัะตัะบะพะน ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะธ
2. **ะัะฐะฒะฐ ะดะพัััะฟะฐ:** ะัะฟะพะปะฝะธัะตะปั ะผะพะถะตั ะธะทะผะตะฝััั ััะฐัััั ะทะฐัะฒะพะบ, ะฝะฐะทะฝะฐัะตะฝะฝัั ะตะผั
3. **ะัะดะธั:** ะัะต ะธะทะผะตะฝะตะฝะธั ััะฐัััะพะฒ ะธ ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ ะดะพะปะถะฝั ะปะพะณะธัะพะฒะฐัััั ะฒ `DocumentHistory`
4. **ะฃะฒะตะดะพะผะปะตะฝะธั:** ะัะธ ะฟะตัะตัะพะดะต ะทะฐัะฒะบะธ ะฒ ััะฐััั `AWAITING_MEASUREMENT` - ัะฒะตะดะพะผะปะตะฝะธะต ัะพะพัะฒะตัััะฒัััะตะผั ัะฟะตัะธะฐะปะธััั
5. **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:** ะขะฐะฑะปะธัั ะทะฐัะฒะพะบ ะดะพะปะถะฝั ะฟะพะดะดะตัะถะธะฒะฐัั ะฟะฐะณะธะฝะฐัะธั ะฟัะธ ะฑะพะปััะพะผ ะบะพะปะธัะตััะฒะต ะทะฐะฟะธัะตะน

---

## ๐ ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ

### ะญัะฐะฟ 1: ะะฐะทะพะฒะฐั ััััะบัััะฐ
- [ ] ะกะพะทะดะฐัั ะผะพะดะตะปั `Application` ะฒ Prisma
- [ ] ะกะพะทะดะฐัั ะผะธะณัะฐัะธั ะะ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฑะฐะทะพะฒัะต API endpoints (CRUD)

### ะญัะฐะฟ 2: ะะฝัะตััะตะนั
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะบะพะผะฟะพะฝะตะฝั ัะฐะฑะปะพ ะทะฐัะฒะพะบ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฒะบะปะฐะดะบะธ ััะฐัััะพะฒ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ัะฐะฑะปะธัั ะทะฐัะฒะพะบ

### ะญัะฐะฟ 3: ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะทะฐะณััะทะบั ะฟัะพะตะบัะฐ/ะฟะปะฐะฝะธัะพะฒะบะธ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะทะฐะณััะทะบั ะพะฟัะพะฒัั ััะตัะพะฒ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะทะฐะณััะทะบั ัะตัะทะฐะดะฐะฝะธะน

### ะญัะฐะฟ 4: ะะพะณะธะบะฐ ะฟัะพะฒะตัะบะธ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฟัะพะฒะตัะบั ะดะฐะฝะฝัั ะดะฒะตัะตะน
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะปะพะณะธะบั ะพะฟัะตะดะตะปะตะฝะธั ะทะฐะผะตัะฐ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฒะฐะปะธะดะฐัะธั ะฟัะธ ะฟะตัะตัะพะดะฐั ััะฐัััะพะฒ

### ะญัะฐะฟ 5: ะะฝัะตะณัะฐัะธั
- [ ] ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ ะฟัะธ ะพะฟะปะฐัะต ััะตัะฐ
- [ ] ะะฝัะตะณัะฐัะธั ั ัะธััะตะผะพะน ัะฒะตะดะพะผะปะตะฝะธะน
- [ ] ะะฝัะตะณัะฐัะธั ั ะธััะพัะธะตะน ะธะทะผะตะฝะตะฝะธะน

### ะญัะฐะฟ 6: ะขะตััะธัะพะฒะฐะฝะธะต
- [ ] ะฎะฝะธั-ัะตััั API
- [ ] ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั
- [ ] E2E ัะตััั UI

---

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 2025-01-XX  
**ะกัะฐััั:** ะ ัะฐะทัะฐะฑะพัะบะต  
**ะัะธะพัะธัะตั:** ะััะพะบะธะน



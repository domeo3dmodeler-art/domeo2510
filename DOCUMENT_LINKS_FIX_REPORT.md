# üîó –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ —Å–≤—è–∑–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ `SUPPLIER-1761169840674` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å—á–µ—Ç –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å–≤—è–∑–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ü–µ–ø–æ—á–∫–∞ —Å–≤—è–∑–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
**–ë—ã–ª–æ:**
```
–°—á–µ—Ç (Invoice) ‚Üê –Ω–µ —Å–≤—è–∑–∞–Ω
–ó–∞–∫–∞–∑ (Order) ‚Üê parent_document_id: null
–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (SupplierOrder) ‚Üê parent_document_id: Order
```

**–°—Ç–∞–ª–æ:**
```
–°—á–µ—Ç (Invoice) 
  ‚Üì parent_document_id
–ó–∞–∫–∞–∑ (Order) ‚Üê parent_document_id: Invoice
  ‚Üì parent_document_id  
–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (SupplierOrder) ‚Üê parent_document_id: Order
```

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ —Å—á–µ—Ç–∞ –≤ API
**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:** `SupplierOrder ‚Üí Order ‚Üí Invoice` —á–µ—Ä–µ–∑ `parent_document_id`
**Fallback:** –ü–æ–∏—Å–∫ –ø–æ `cart_session_id` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
- **–ó–∞–∫–∞–∑** `ORD-001` —Ç–µ–ø–µ—Ä—å —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å—á–µ—Ç `INVOICE-1761169735063`
- **–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞** `SUPPLIER-1761169840674` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –∑–∞–∫–∞–∑
- **–°—É–º–º–∞** –∑–∞–∫–∞–∑–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å 0 –Ω–∞ 80400‚ÇΩ
- **cart_session_id** –æ—á–∏—â–µ–Ω —É –∑–∞–∫–∞–∑–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (—Å–≤—è–∑—å —á–µ—Ä–µ–∑ parent_document_id)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### API —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "supplierOrders": [
    {
      "id": "cmh2j1u78000o1172hi5un42s",
      "number": "SUPPLIER-1761169840674",
      "total_amount": 80400,
      "parent_document_id": "cmh2j1t0x000l11720s24x50v",
      "cart_session_id": null,
      "invoiceInfo": {
        "id": "cmh2izn0y000f1172fxmla0n7",
        "number": "INVOICE-1761169735063",
        "total_amount": 80400
      }
    }
  ]
}
```

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è:
- ‚úÖ **–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:** 80,400‚ÇΩ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- ‚úÖ **–°–≤—è–∑–∞–Ω–Ω—ã–π —Å—á–µ—Ç:** "–°—á–µ—Ç - INVOICE-1761169735063" (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- ‚úÖ **–õ–æ–≥–∏–∫–∞ —Å–≤—è–∑–µ–π:** –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `parent_document_id`

## üéØ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–≤—è–∑–µ–π

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É —Å–≤—è–∑–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

```
–ö–ü (Quote) 
  ‚Üì parent_document_id
–°—á–µ—Ç (Invoice) 
  ‚Üì parent_document_id
–ó–∞–∫–∞–∑ (Order) 
  ‚Üì parent_document_id
–ó–∞–∫–∞–∑ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (SupplierOrder)
```

**cart_session_id** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–¥–Ω–æ–π –∫–æ—Ä–∑–∏–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –∞ **parent_document_id** - –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: $(Get-Date)*

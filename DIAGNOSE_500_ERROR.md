# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Internal Server Error

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. SSH —Ç—É–Ω–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç?

```powershell
netstat -an | findstr ":5432"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
TCP    127.0.0.1:5432         0.0.0.0:0              LISTENING
```

–ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```powershell
npm run dev:tunnel
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL –≤ .env.local

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```env
DATABASE_URL="postgresql://domeo:staging_password@localhost:5432/domeo_staging?schema=public"
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ dev —Å–µ—Ä–≤–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏. –¢–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ Prisma.

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ /api/test-db

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:3000/api/test-db`

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î.

---

## üêõ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:

### P1001: Can't reach database server
**–†–µ—à–µ–Ω–∏–µ:** SSH —Ç—É–Ω–Ω–µ–ª—å –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev:tunnel`

### P1017: Server has closed the connection
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DATABASE_URL –≤ .env.local

### P2002: Unique constraint violation
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

---

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

```powershell
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å
netstat -an | findstr ":5432"

# 2. –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å
npm run dev:tunnel

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env.local
Get-Content .env.local | Select-String "DATABASE_URL"

# 4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π endpoint
# http://localhost:3000/api/test-db
```

---

**–û—Ç–∫—Ä–æ–π—Ç–µ `/api/test-db` –∏ –ø—Ä–∏—à–ª–∏—Ç–µ –æ—Ç–≤–µ—Ç - —Ç–∞–º –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ!**


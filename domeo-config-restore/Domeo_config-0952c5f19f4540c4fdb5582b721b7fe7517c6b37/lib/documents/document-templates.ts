// lib/documents/document-templates.ts
// –®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤

export interface DocumentTemplate {
  id: string;
  name: string;
  type: 'quote' | 'invoice' | 'supplier_order';
  description: string;
  icon: string;
  role: string; // –ö—Ç–æ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
  format: 'pdf' | 'excel';
  sections: DocumentSection[];
}

export interface DocumentSection {
  id: string;
  name: string;
  type: 'header' | 'client_info' | 'products' | 'pricing' | 'footer' | 'custom';
  required: boolean;
  fields: DocumentField[];
  layout: {
    position: 'top' | 'middle' | 'bottom';
    width: 'full' | 'half' | 'quarter';
    align: 'left' | 'center' | 'right';
  };
}

export interface DocumentField {
  id: string;
  name: string;
  type: 'text' | 'number' | 'date' | 'image' | 'table' | 'calculated';
  value: string | number | object;
  required: boolean;
  validation?: {
    min?: number;
    max?: number;
    pattern?: string;
  };
}

// –®–ê–ë–õ–û–ù: –ö–û–ú–ú–ï–†–ß–ï–°–ö–û–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï (–ö–ü)
export const QUOTE_TEMPLATE: DocumentTemplate = {
  id: 'quote',
  name: '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ',
  type: 'quote',
  description: '–î–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥ –∫–ª–∏–µ–Ω—Ç—É',
  icon: 'üìÑ',
  role: 'complectator',
  format: 'pdf',
  sections: [
    {
      id: 'header',
      name: '–®–∞–ø–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞',
      type: 'header',
      required: true,
      fields: [
        {
          id: 'company_logo',
          name: '–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'image',
          value: '',
          required: true
        },
        {
          id: 'company_name',
          name: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'text',
          value: '–û–û–û "–î–æ–º–µ–æ"',
          required: true
        },
        {
          id: 'company_address',
          name: '–ê–¥—Ä–µ—Å –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'text',
          value: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1',
          required: true
        },
        {
          id: 'company_phone',
          name: '–¢–µ–ª–µ—Ñ–æ–Ω',
          type: 'text',
          value: '+7 (495) 123-45-67',
          required: true
        },
        {
          id: 'company_email',
          name: 'Email',
          type: 'text',
          value: 'info@domeo.ru',
          required: true
        },
        {
          id: 'document_title',
          name: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞',
          type: 'text',
          value: '–ö–û–ú–ú–ï–†–ß–ï–°–ö–û–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï',
          required: true
        },
        {
          id: 'document_number',
          name: '–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'document_date',
          name: '–î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞',
          type: 'date',
          value: new Date().toISOString().split('T')[0],
          required: true
        }
      ],
      layout: {
        position: 'top',
        width: 'full',
        align: 'center'
      }
    },
    {
      id: 'client_info',
      name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ',
      type: 'client_info',
      required: true,
      fields: [
        {
          id: 'client_name',
          name: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'client_contact',
          name: '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'client_phone',
          name: '–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'client_email',
          name: 'Email –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'client_address',
          name: '–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏',
          type: 'text',
          value: '',
          required: true
        }
      ],
      layout: {
        position: 'top',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'products',
      name: '–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤',
      type: 'products',
      required: true,
      fields: [
        {
          id: 'products_table',
          name: '–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤',
          type: 'table',
          value: {
            columns: [
              { id: 'name', name: '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ', width: '40%' },
              { id: 'sku', name: '–ê—Ä—Ç–∏–∫—É–ª', width: '15%' },
              { id: 'quantity', name: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ', width: '10%' },
              { id: 'price', name: '–¶–µ–Ω–∞ –∑–∞ –µ–¥.', width: '15%' },
              { id: 'total', name: '–°—É–º–º–∞', width: '20%' }
            ],
            data: [] // –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
          },
          required: true
        }
      ],
      layout: {
        position: 'middle',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'pricing',
      name: '–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏',
      type: 'pricing',
      required: true,
      fields: [
        {
          id: 'subtotal',
          name: '–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤',
          type: 'calculated',
          value: 0,
          required: true
        },
        {
          id: 'discount',
          name: '–°–∫–∏–¥–∫–∞',
          type: 'number',
          value: 0,
          required: false
        },
        {
          id: 'delivery',
          name: '–î–æ—Å—Ç–∞–≤–∫–∞',
          type: 'number',
          value: 0,
          required: false
        },
        {
          id: 'installation',
          name: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞',
          type: 'number',
          value: 0,
          required: false
        },
        {
          id: 'tax',
          name: '–ù–î–°',
          type: 'calculated',
          value: 0,
          required: true
        },
        {
          id: 'total',
          name: '–ò—Ç–æ–≥–æ',
          type: 'calculated',
          value: 0,
          required: true
        }
      ],
      layout: {
        position: 'middle',
        width: 'half',
        align: 'right'
      }
    },
    {
      id: 'terms',
      name: '–£—Å–ª–æ–≤–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏',
      type: 'custom',
      required: false,
      fields: [
        {
          id: 'delivery_terms',
          name: '–°—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∫–∏',
          type: 'text',
          value: '30 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π',
          required: false
        },
        {
          id: 'payment_terms',
          name: '–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã',
          type: 'text',
          value: '50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞, 50% –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏',
          required: false
        },
        {
          id: 'warranty',
          name: '–ì–∞—Ä–∞–Ω—Ç–∏—è',
          type: 'text',
          value: '24 –º–µ—Å—è—Ü–∞',
          required: false
        }
      ],
      layout: {
        position: 'bottom',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'footer',
      name: '–ü–æ–¥–ø–∏—Å—å',
      type: 'footer',
      required: true,
      fields: [
        {
          id: 'manager_signature',
          name: '–ü–æ–¥–ø–∏—Å—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'manager_name',
          name: '–§–ò–û –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
          type: 'text',
          value: '',
          required: true
        }
      ],
      layout: {
        position: 'bottom',
        width: 'half',
        align: 'left'
      }
    }
  ]
};

// –®–ê–ë–õ–û–ù: –°–ß–ï–¢ –ù–ê –û–ü–õ–ê–¢–£
export const INVOICE_TEMPLATE: DocumentTemplate = {
  id: 'invoice',
  name: '–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É',
  type: 'invoice',
  description: '–°—á–µ—Ç –¥–ª—è –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥',
  icon: 'üí∞',
  role: 'complectator',
  format: 'pdf',
  sections: [
    {
      id: 'header',
      name: '–®–∞–ø–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞',
      type: 'header',
      required: true,
      fields: [
        {
          id: 'company_logo',
          name: '–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'image',
          value: '',
          required: true
        },
        {
          id: 'company_name',
          name: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'text',
          value: '–û–û–û "–î–æ–º–µ–æ"',
          required: true
        },
        {
          id: 'company_details',
          name: '–†–µ–∫–≤–∏–∑–∏—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏',
          type: 'text',
          value: '–ò–ù–ù: 1234567890, –ö–ü–ü: 123456789, –û–ì–†–ù: 1234567890123',
          required: true
        },
        {
          id: 'bank_details',
          name: '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã',
          type: 'text',
          value: '–ë–∞–Ω–∫: –ü–ê–û "–°–±–µ—Ä–±–∞–Ω–∫", –ë–ò–ö: 044525225, —Ä/—Å: 40702810123456789012',
          required: true
        },
        {
          id: 'document_title',
          name: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞',
          type: 'text',
          value: '–°–ß–ï–¢ –ù–ê –û–ü–õ–ê–¢–£',
          required: true
        },
        {
          id: 'document_number',
          name: '–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'document_date',
          name: '–î–∞—Ç–∞ —Å—á–µ—Ç–∞',
          type: 'date',
          value: new Date().toISOString().split('T')[0],
          required: true
        },
        {
          id: 'payment_due',
          name: '–°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã',
          type: 'date',
          value: '',
          required: true
        }
      ],
      layout: {
        position: 'top',
        width: 'full',
        align: 'center'
      }
    },
    {
      id: 'client_info',
      name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ',
      type: 'client_info',
      required: true,
      fields: [
        {
          id: 'client_name',
          name: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'client_inn',
          name: '–ò–ù–ù –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: false
        },
        {
          id: 'client_address',
          name: '–ê–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞',
          type: 'text',
          value: '',
          required: true
        }
      ],
      layout: {
        position: 'top',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'products',
      name: '–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤',
      type: 'products',
      required: true,
      fields: [
        {
          id: 'products_table',
          name: '–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤',
          type: 'table',
          value: {
            columns: [
              { id: 'name', name: '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ', width: '40%' },
              { id: 'sku', name: '–ê—Ä—Ç–∏–∫—É–ª', width: '15%' },
              { id: 'quantity', name: '–ö–æ–ª-–≤–æ', width: '10%' },
              { id: 'unit', name: '–ï–¥.', width: '5%' },
              { id: 'price', name: '–¶–µ–Ω–∞', width: '15%' },
              { id: 'total', name: '–°—É–º–º–∞', width: '15%' }
            ],
            data: []
          },
          required: true
        }
      ],
      layout: {
        position: 'middle',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'pricing',
      name: '–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏',
      type: 'pricing',
      required: true,
      fields: [
        {
          id: 'subtotal',
          name: '–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤',
          type: 'calculated',
          value: 0,
          required: true
        },
        {
          id: 'tax_rate',
          name: '–°—Ç–∞–≤–∫–∞ –ù–î–°',
          type: 'number',
          value: 20,
          required: true
        },
        {
          id: 'tax_amount',
          name: '–°—É–º–º–∞ –ù–î–°',
          type: 'calculated',
          value: 0,
          required: true
        },
        {
          id: 'total',
          name: '–ö –æ–ø–ª–∞—Ç–µ',
          type: 'calculated',
          value: 0,
          required: true
        }
      ],
      layout: {
        position: 'middle',
        width: 'half',
        align: 'right'
      }
    },
    {
      id: 'payment_info',
      name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–ø–ª–∞—Ç–µ',
      type: 'custom',
      required: true,
      fields: [
        {
          id: 'payment_purpose',
          name: '–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'payment_method',
          name: '–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã',
          type: 'text',
          value: '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥',
          required: true
        }
      ],
      layout: {
        position: 'bottom',
        width: 'full',
        align: 'left'
      }
    }
  ]
};

// –®–ê–ë–õ–û–ù: –ó–ê–ö–ê–ó –ü–û–°–¢–ê–í–©–ò–ö–£
export const SUPPLIER_ORDER_TEMPLATE: DocumentTemplate = {
  id: 'supplier_order',
  name: '–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É',
  type: 'supplier_order',
  description: '–ó–∞–∫–∞–∑ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞',
  icon: 'üè≠',
  role: 'executor',
  format: 'excel',
  sections: [
    {
      id: 'header',
      name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ',
      type: 'header',
      required: true,
      fields: [
        {
          id: 'order_number',
          name: '–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'order_date',
          name: '–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞',
          type: 'date',
          value: new Date().toISOString().split('T')[0],
          required: true
        },
        {
          id: 'delivery_date',
          name: '–î–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤–∫–∏',
          type: 'date',
          value: '',
          required: true
        },
        {
          id: 'supplier_name',
          name: '–ü–æ—Å—Ç–∞–≤—â–∏–∫',
          type: 'text',
          value: '',
          required: true
        },
        {
          id: 'supplier_contact',
          name: '–ö–æ–Ω—Ç–∞–∫—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞',
          type: 'text',
          value: '',
          required: true
        }
      ],
      layout: {
        position: 'top',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'products',
      name: '–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
      type: 'products',
      required: true,
      fields: [
        {
          id: 'products_table',
          name: '–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤',
          type: 'table',
          value: {
            columns: [
              { id: 'name', name: '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ', width: '30%' },
              { id: 'sku', name: '–ê—Ä—Ç–∏–∫—É–ª', width: '15%' },
              { id: 'specifications', name: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏', width: '25%' },
              { id: 'quantity', name: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ', width: '10%' },
              { id: 'material', name: '–ú–∞—Ç–µ—Ä–∏–∞–ª', width: '10%' },
              { id: 'color', name: '–¶–≤–µ—Ç', width: '10%' }
            ],
            data: []
          },
          required: true
        }
      ],
      layout: {
        position: 'middle',
        width: 'full',
        align: 'left'
      }
    },
    {
      id: 'production_requirements',
      name: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É',
      type: 'custom',
      required: true,
      fields: [
        {
          id: 'quality_standards',
          name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞',
          type: 'text',
          value: '–ì–û–°–¢, –¢–£',
          required: true
        },
        {
          id: 'packaging_requirements',
          name: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É–ø–∞–∫–æ–≤–∫–µ',
          type: 'text',
          value: '–ó–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞',
          required: true
        },
        {
          id: 'delivery_requirements',
          name: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ—Å—Ç–∞–≤–∫–µ',
          type: 'text',
          value: '–ê–∫–∫—É—Ä–∞—Ç–Ω–∞—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞',
          required: true
        }
      ],
      layout: {
        position: 'bottom',
        width: 'full',
        align: 'left'
      }
    }
  ]
};

// –í—Å–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
export const DOCUMENT_TEMPLATES = [
  QUOTE_TEMPLATE,
  INVOICE_TEMPLATE,
  SUPPLIER_ORDER_TEMPLATE
];

// –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø–æ —Ç–∏–ø—É
export function getTemplateByType(type: string): DocumentTemplate | undefined {
  return DOCUMENT_TEMPLATES.find(template => template.type === type);
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ —Ä–æ–ª–∏
export function getTemplatesByRole(role: string): DocumentTemplate[] {
  return DOCUMENT_TEMPLATES.filter(template => template.role === role);
}




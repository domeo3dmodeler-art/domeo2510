# üìã –û–¢–ß–ï–¢ –û –ü–†–ò–ú–ï–ù–ï–ù–ò–ò –ü–†–ê–í–ò–õ –°–ò–°–¢–ï–ú–´

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
**–§–∞–π–ª**: `lib/validation/status-transitions.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –§—É–Ω–∫—Ü–∏—è `canTransitionTo()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞
- –§—É–Ω–∫—Ü–∏—è `getValidTransitions()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- –§—É–Ω–∫—Ü–∏–∏ `canEditDocument()` –∏ `canDeleteDocument()` –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å—ã –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**:
- **–ö–ü**: DRAFT ‚Üí SENT ‚Üí ACCEPTED/REJECTED ‚Üí CANCELLED
- **–°—á–µ—Ç**: DRAFT ‚Üí SENT ‚Üí PAID ‚Üí IN_PRODUCTION ‚Üí RECEIVED_FROM_SUPPLIER ‚Üí COMPLETED
- **–ó–∞–∫–∞–∑**: DRAFT ‚Üí CONFIRMED ‚Üí IN_PRODUCTION ‚Üí READY ‚Üí COMPLETED
- **–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞**: PENDING ‚Üí ORDERED ‚Üí IN_PRODUCTION ‚Üí READY ‚Üí COMPLETED

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è COMPLECTATOR
**–§–∞–π–ª**: `lib/auth/permissions.ts`

**–ù–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞**:
- ‚úÖ **COMPLECTATOR –ù–ï –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤**
- ‚úÖ **COMPLECTATOR –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤**
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã**

**–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤**:
| –î–µ–π—Å—Ç–≤–∏–µ | ADMIN | COMPLECTATOR | EXECUTOR |
|----------|-------|--------------|----------|
| –°–æ–∑–¥–∞–Ω–∏–µ –ö–ü | ‚úÖ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ –°—á–µ—Ç–∞ | ‚úÖ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ –ó–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ –ó–∞–∫–∞–∑–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ | ‚úÖ | ‚ùå | ‚úÖ |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ | ‚úÖ | ‚úÖ | ‚ùå |
| –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ | ‚úÖ | ‚ùå | ‚ùå |
| –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | ‚úÖ | ‚úÖ* | ‚úÖ* |

*—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### 3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
**–§–∞–π–ª**: `app/api/documents/[id]/route.ts`

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**:
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ DRAFT –∏–ª–∏ CANCELLED)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- –î–æ–∫—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ç—É—Å–µ DRAFT –∏–ª–∏ CANCELLED
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–∫—Ä–æ–º–µ ADMIN)
- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
**–§–∞–π–ª**: `lib/notifications/status-notifications.ts`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
- **–ö–ü**: SENT ‚Üí –∫–ª–∏–µ–Ω—Ç, ACCEPTED/REJECTED ‚Üí –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ç–æ—Ä
- **–°—á–µ—Ç**: SENT ‚Üí –∫–ª–∏–µ–Ω—Ç, PAID ‚Üí –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ç–æ—Ä, IN_PRODUCTION ‚Üí –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
- **–ó–∞–∫–∞–∑**: CONFIRMED ‚Üí –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, IN_PRODUCTION ‚Üí –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ç–æ—Ä
- **–ó–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞**: ORDERED ‚Üí –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ç–æ—Ä, –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã ‚Üí –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ç–æ—Ä

### 5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã API endpoints

#### `app/api/documents/[id]/status/route.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### `app/api/documents/create/route.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ 'system'

#### `app/api/documents/[id]/route.ts`
- –ù–æ–≤—ã–π endpoint –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### `app/api/clients/[id]/route.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –ö–ü** - COMPLECTATOR –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ö–ü
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞** - COMPLECTATOR –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—á–µ—Ç–∞
3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤** - –°—Ç–∞—Ç—É—Å—ã –∏–∑–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ COMPLECTATOR** - COMPLECTATOR –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

### ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –ù—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (first_name, last_name)
2. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤** - –ù—É–∂–Ω–æ –ø–æ–ª–µ supplier_name

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 4
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 4
- **–î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π**: 12
- **–ü–æ–∫—Ä—ã—Ç–æ –ø—Ä–∞–≤–∏–ª**: 100%

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

1. **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª —Å–∏—Å—Ç–µ–º—ã** —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç—É `SYSTEM_RULES_AND_PERMISSIONS.md`
2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –∏ –ø—Ä–∞–≤ –Ω–∞ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
5. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–µ—Å—Ç—ã** - –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∑–∞–∫–∞–∑–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º** - –æ–±–Ω–æ–≤–∏—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
3. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø—Ä–∞–≤
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–∞–≤

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–†–ê–í–ò–õ–ê –°–ò–°–¢–ï–ú–´ –£–°–ü–ï–®–ù–û –ü–†–ò–ú–ï–ù–ï–ù–´**  
**–î–∞—Ç–∞**: 23.10.2025  
**–í–µ—Ä—Å–∏—è**: 1.0
